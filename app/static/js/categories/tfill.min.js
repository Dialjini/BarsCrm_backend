let rowFilling=(a,b,c)=>{let d=a[1],e=()=>{let c=$("<tr>");for(let d=0;d<a[0].length-1;d++){if(2==d&&"stock"==b){elementTr=`
                <th width="${a[0][d].width}%">
                    <div class="flex jc-sb">
                        <span>${a[0][d].name}</span>
                        ${function(){let a;return $.ajax({url:"/getThisUser",type:"GET",dataType:"html",async:!1,success:function(b){a=JSON.parse(b)}}),"admin"==a.role?`<button class="btn btn-main btn-add-items" id="item_add" onclick="createCardMenu(this)">Добавить</button>`:""}()}
                    </div>
                </th>`}else elementTr=3==d&&"client"==b||1==d&&"provider"==b||1==d&&"filter_provider"==b||2==d&&"carrier"==b?`
                <th id="all_area" onclick="selectFilterArea(this)" width="${a[0][d].width}%">
                    <div class="flex jc-sb">
                        <span>${a[0][d].name}</span>
                        <img src="static/images/dropmenu_black.svg" class="drop_down_img all_area">
                    </div>
                </th>`:3==d&&"provider"==b||3==d&&"filter_provider"==b?`
                <th id="pd_group" onclick="selectGroupProduct(this)" width="${a[0][d].width}%">
                    <div class="flex jc-sb">
                        <span>${a[0][d].name}</span>
                        <img src="static/images/dropmenu_black.svg" class="drop_down_img pd_group">
                    </div>
                </th>`:4==d&&"provider"==b||4==d&&"filter_provider"==b?`
                <th id="pd_price" onclick="selectFilterPrice(this)" width="${a[0][d].width}%">
                    <div class="flex jc-sb">
                        <span>${a[0][d].name}</span>
                        <img src="static/images/dropmenu_black.svg" class="drop_down_img pd_price">
                    </div>
                </th>`:4==d&&"client"==b?`
                <th id="cl_category" onclick="selectFilterCategory(this)" width="${a[0][d].width}%">
                    <div class="flex jc-sb">
                        <span>${a[0][d].name}</span>
                        <img src="static/images/dropmenu_black.svg" class="drop_down_img cl_category">
                    </div>
                </th>`:`<th width="${a[0][d].width}%">${a[0][d].name}</th>`;c.append(elementTr)}return"delivery"!==b&&"stock"!==b?c.append(`
            <th id="pd_manager" onclick="selectManager(this)" width="${a[0][a[0].length-1].width}%">
                <div class="flex jc-sb">
                    <span>${a[0][a[0].length-1].name}</span>
                    <img src="static/images/dropmenu_black.svg" class="drop_down_img pd_manager">
                </div>
            </th>`):c.append(`<th width="${a[0][a[0].length-1].width}%">${a[0][a[0].length-1].name}</th>`),c},f=a=>{c.append(e());let b;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(a){b=JSON.parse(a)}});for(let e=0;e<d.length;e++){let f;for(let a=0;a<b.length;a++)if(+b[a].id==+d[e].Manager_id&&d[e].Manager_active){f=b[a].second_name;break}else f="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";let g,h=[{id:"client",list:[d[e].id,d[e].Name,d[e].Oblast,d[e].Rayon,d[e].Category,f]},{id:"carrier",list:[d[e].Name,d[e].Region,d[e].Area,d[e].Capacity,d[e].View,f]}];for(let b=0;b<h.length;b++)if(h[b].id===a){g=h[b].list;break}let i=$("<tr>",{id:`${a}_${d[e].id}`,onclick:"createCardMenu(this)"});for(let a,b=0;b<g.length;b++){a=g[b],(null===a||""===a)&&(a="\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E");let c=$("<td>",{html:a});i.append(c)}c.append(i)}return c};const g=[{id:"client",function:f},{id:"provider",function:()=>{c.append(e());let a;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(b){a=JSON.parse(b)}});for(let b=d.length-1;0<=b;b--){let e,f=$("<tbody>",{id:`provider_${b+1}`,name:"provider",onclick:"createCardMenu(this)"});for(let c=0;c<a.length;c++)if(+a[c].id==+d[b].Manager_id&&d[b].Manager_active){e=a[c].second_name;break}else e="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";let g=JSON.parse(d[b].Item_list);null==g&&(g=[{item_product:"",item_price:""}]);let h=null==d[b].Oblast?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Oblast,i=null==d[b].Rayon?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Rayon,j=null==d[b].Name?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Name;if(f.append(`
                <tr>
                    <td rowspan="${0==g.length?1:g.length}">${h}</td>
                    <td rowspan="${0==g.length?1:g.length}">${i}</td>
                    <td rowspan="${0==g.length?1:g.length}">${j}</td>
                    <td>${g[0].item_product}</td>
                    <td>${g[0].item_price}</td>
                    <td rowspan="${0==g.length?1:g.length}">${e}</td>
                </tr>
            `),g=JSON.parse(d[b].Item_list),null!=g)for(let a=1;a<g.length;a++)f.append(`
                    <tr>
                        <td>${g[a].item_product}</td>
                        <td>${g[a].item_price}</td>
                    </tr>
                    `);c.append(f)}return c}},{id:"filter_provider",function:()=>{c.append(e());let a;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(b){a=JSON.parse(b)}});for(let b=d.length-1;0<=b;b--){let e,f=$("<tbody>",{id:`provider_${d[b].id}`,name:"provider",onclick:"createCardMenu(this)"});for(let c=0;c<a.length;c++)if(+a[c].id==+d[b].Manager_id&&d[b].Manager_active){e=a[c].second_name;break}else e="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";let g=JSON.parse(d[b].Item_list);null==g&&(g=[{item_product:"",item_price:""}]);let h=null==d[b].Oblast?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Oblast,i=null==d[b].Rayon?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Rayon,j=null==d[b].Name?"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E":d[b].Name;if(f.append(`
                <tr>
                    <td rowspan="${0==g.length?1:g.length}">${h}</td>
                    <td rowspan="${0==g.length?1:g.length}">${i}</td>
                    <td rowspan="${0==g.length?1:g.length}">${j}</td>
                    <td>${g[0].item_product}</td>
                    <td>${g[0].item_price}</td>
                    <td rowspan="${0==g.length?1:g.length}">${e}</td>
                </tr>
            `),g=JSON.parse(d[b].Item_list),null!=g)for(let a=1;a<g.length;a++)f.append(`
                    <tr>
                        <td>${g[a].item_product}</td>
                        <td>${g[a].item_price}</td>
                    </tr>
                    `);c.append(f)}return c}},{id:"carrier",function:f},{id:"debit",function:()=>{let a,b;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(a){b=JSON.parse(a)}}),$.ajax({url:"/getDeliveries",type:"GET",async:!1,dataType:"html",success:function(b){a=JSON.parse(b)}}),c.append(e());for(let e=d.length-1;0<=e;e--){let f;for(let a=0;a<b.length;a++)if(+b[a].id==+d[e].account.Manager_id){f=null==b[a].second_name?"\u0424\u0430\u043C\u0438\u043B\u0438\u044F \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430":b[a].second_name;break}else f="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";let g=0;if(d[e].account.Payment_history!=null){let a=JSON.parse(d[e].account.Payment_history),b=d[e].account.Sum;for(let b=0;b<a.length;b++)g+=+a[b].sum}else g=0;let h,i;for(let b=0;b<a.length;b++)if(a[b].delivery.Account_id==e+1){h=a[b].delivery.Start_date,i=a[b].delivery.Postponement_date;break}h==null&&(h="\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E"),i==null&&(i="\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E");let k=$("<tr>",{id:`account_${e+1}`,onclick:"transferToAccounts(this)"});const l=[d[e].items[0].Prefix,d[e].account.Name,h,i,d[e].account.Sum,g,+d[e].account.Sum-g,f];for(let a,b=0;b<l.length;b++)a=$("<td>",{html:l[b]}),k.append(a);c.append(k)}return c}},{id:"account",function:()=>{c.append(e());let a;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(b){a=JSON.parse(b)}});for(let b=d.length-1;0<=b;b--){if(d[b].account.Payment_history!=null){let a=JSON.parse(d[b].account.Payment_history),c=d[b].account.Sum,e=0;for(let b=0;b<a.length;b++)e+=+a[b].sum;status=+c<=+e?"<span class=\"green\">\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E</span>":"<span class=\"red\">\u041D\u0435\u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E</span>"}else status="<span class=\"red\">\u041D\u0435\u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E</span>";let e;for(let c=0;c<a.length;c++)if(+a[c].id==+d[b].account.Manager_id){e=null==a[c].second_name?"\u0424\u0430\u043C\u0438\u043B\u0438\u044F \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430":a[c].second_name;break}else e="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D";let f=0,g=JSON.parse(d[b].account.Hello);for(let a=0;a<g.length;a++)f+=+g[a];let h=$("<tr>",{id:`account_${b+1}`,onclick:"createCardMenu(this)"});const i=[d[b].items[0].Prefix,d[b].account.Date,d[b].account.Name,d[b].account.Sum,status,f,e];for(let a,b=0;b<i.length;b++)a=$("<td>",{html:i[b]}),h.append(a);c.append(h)}return c}},{id:"delivery",function:()=>{c.append(e());for(let a=d.length-1;0<=a;a--){let b=$("<tr>",{id:`delivery_${a+1}`,onclick:"createDelCardMenu(this)"}),e=null==d[a].carrier?"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D":d[a].carrier.Name;d[a].delivery.NDS=d[a].delivery.NDS[0]+d[a].delivery.NDS[1];let f=0,g=d[a].delivery.Amounts==null?[]:JSON.parse(d[a].delivery.Amounts),h="\u041E\u041E\u041E"==d[a].delivery.Customer?.74:1.26;for(let a=0;a<g.length;a++)f+=+g[a];const i=[d[a].delivery.Date,d[a].delivery.Name,d[a].delivery.Stock,e,d[a].delivery.Customer,Math.ceil(f*h),f,d[a].delivery.Payment_date];for(let a,c=0;c<i.length;c++)a=$("<td>",{html:i[c]}),b.append(a);c.append(b)}return c}},{id:"stock",function:()=>{c.append(e());for(let a=d.length-1;0<=a;a--)for(let b=d[a].items.length-1;0<=b;b--)if(null!=d[a].stock_address){let e=$("<tr>",{id:`stock_${d[a].items[b].Item_id}`,onclick:"createCardMenu(this, 1)"});const f=[d[a].items[b].Prefix,d[a].items[b].Group_name,d[a].items[b].Name,d[a].items[b].Weight,d[a].items[b].Packing,d[a].items[b].Volume,d[a].items[b].Cost,d[a].items[b].NDS,d[a].stock_address];for(let a,b=0;b<f.length;b++)a=$("<td>",{html:f[b]}),e.append(a);c.append(e)}return c}},{id:"filter_stock",function:()=>{c.append(e());for(let a,b=d.length-1;0<=b;b--){a=$("<tr>",{id:`stock_${d[b].Item_id}`,onclick:"createCardMenu(this, 1)"});const e=[d[b].Prefix,d[b].Group_name,d[b].Name,d[b].Weight,d[b].Packing,d[b].Volume,d[b].Cost,d[b].NDS,d[b].stock_address];for(let b,c=0;c<e.length;c++)b=$("<td>",{html:e[c]}),a.append(b);c.append(a)}return c}}];for(let d of g)if(d.id===b)return d.function(b)};function searchByCompetitor(){$.ajax({url:"/getAllClientItems",type:"GET",dataType:"html",success:function(a){let b=JSON.parse(a),c=[];for(let d=0;d<b.length;d++)for(let a=0;a<b[d].data.length;a++)"\u0412\u044B\u0431\u0440\u0430\u0442\u044C"!==b[d].data[a].Name&&"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D"!==b[d].data[a].Creator&&"\u041A\u043E\u043D\u043A\u0443\u0440\u0435\u043D\u0442\u043E\u0432 \u043D\u0435\u0442"!==b[d].data[a].Creator&&c.push(b[d].data[a].Client_id);let d=categoryInListClient[1][1],e=[];for(let b=0;b<c.length;b++)for(let a=0;a<d.length;a++)c[b]===d[a].id&&e.push(d[a]);filterClient[1][1]!=null&&filterClient[1].pop(),filterClient[1][1]=[];for(let b=0;b<e.length-1;b++)for(let a=b+1;a<e.length;a++)e[b].id===e[a].id&&(e.splice(a,1),a--);for(let b=0;b<e.length;b++)filterClient[1][1].push(e[b]);$(".table").remove(),$(".info").append(fillingTables(filterClient)),$(".centerBlock .header .cancel").remove(),$(".centerBlock .header").append(`
                <div class="cancel">
                    <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
                </div>
            `)}})}let sortStatus={product:{status:!1,filter:null,last:null},price:{status:!1,filter:null},area:{status:!1,filter:null},category:{status:!1,filter:null,last:null},manager:{status:!1,filter:null,last:null}};function sortTableByCategory(a){let b,c=a.innerHTML,d=[];sortStatus.manager.status||sortStatus.area.status?filterClient[1][1]==null?b=categoryInListClient[1][1]:b=null==sortStatus.category.last?filterClient[1][1]:sortStatus.category.last:(filterClient[1][1]!=null&&filterClient[1].pop(),b=categoryInListClient[1][1]);for(let e=0;e<b.length;e++)b[e].Category===c&&d.push(b[e]);filterClient[1][1]!=null&&filterClient[1].pop(),filterClient[1][1]=d,$(".table").remove(),$(".info").append(fillingTables(filterClient)),sortStatus.category.status=!0,sortStatus.category.filter=c,$(".centerBlock .header .cancel").remove(),$(".centerBlock .header").append(`
        <div class="cancel">
            <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
        </div>
    `)}function sortTableByManagers(a){let b=a.innerHTML;$(".centerBlock .header .cancel").remove();let c;$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(a){c=JSON.parse(a)}});for(let d=0;d<c.length;d++)if("manager"==c[d].role&&c[d].second_name==b){let a,e=c[d].id;"client"==saveTableAndCard[0].id?(sortStatus.category.status||sortStatus.area.status?filterClient[1][1]==null?a=categoryInListClient[1][1]:a=null==sortStatus.manager.last?filterClient[1][1]:sortStatus.manager.last:(filterClient[1][1]!=null&&filterClient[1].pop(),a=categoryInListClient[1][1]),sortStatus.manager.last=categoryInListClient[1][1]):a=saveTableAndCard[1][1];let f=[{id:"client",list:"Manager_id",filter:filterClient},{id:"provider",list:"Manager_id",filter:filterProvider},{id:"carrier",list:"Manager_id",filter:filterCarrier}],g=[];for(let b=0;b<f.length;b++)if(f[b].id==saveTableAndCard[0].id){for(let c,d=0;d<a.length;d++)c=a[d][f[b].list],c==e&&g.push(a[d]);let c=[];for(let a=0;a<g.length;a++)"\u041A\u043B\u0438\u0435\u043D\u0442"===g[a].Category&&(c.push(g[a]),g.splice(a,1),a--);for(let a=0;a<c.length;a++)g.push(c[a]);f[b].filter[1][1]=g.reverse(),$(".table").remove(),$(".info").append(fillingTables(f[b].filter));break}"client"==saveTableAndCard[0].id&&(sortStatus.manager.status=!0,sortStatus.manager.filter=b),$(".centerBlock .header .cancel").remove(),$(".centerBlock .header").append(`
                <div class="cancel">
                    <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
                </div>
            `);break}}function sortTableByArea(a,b=!0){let c;"client"==saveTableAndCard[0].id?sortStatus.manager.status||sortStatus.category.status?c=filterClient:(filterClient[1][1]!=null&&filterClient[1].pop(),c=categoryInListClient.slice()):c=saveTableAndCard.slice();let d=[],e=a.id==null?a:a.id;for(let f,g=0;g<c[1][1].length;g++){f=[c[1][1][g]];for(let a=g+1;a<c[1][1].length;a++)c[1][1][g].Oblast===c[1][1][a].Oblast&&(f.push(c[1][1][a]),c[1][1].splice(a,1),a--);f.sort(function(d,a){if(d.Rayon!=null){if("min"==e){if("provider"==c[0].id){if(d.Rayon<a.Rayon)return 1;if(d.Rayon>a.Rayon)return-1}else{if(d.Rayon>a.Rayon)return 1;if(d.Rayon<a.Rayon)return-1}}else if("provider"==c[0].id){if(d.Rayon>a.Rayon)return 1;if(d.Rayon<a.Rayon)return-1}else{if(d.Rayon<a.Rayon)return 1;if(d.Rayon>a.Rayon)return-1}}else if("min"==e){if(d.Area>a.Area)return 1;if(d.Area<a.Area)return-1}else{if(d.Area<a.Area)return 1;if(d.Area>a.Area)return-1}return 0});for(let a=0;a<f.length;a++)d.push(f[a])}d.sort(function(d,a){if(!(d.Oblast!=null)){if(d.Region>a.Region)return 1;if(d.Region<a.Region)return-1}else if("provider"==c[0].id){if(d.Oblast<a.Oblast)return 1;if(d.Oblast>a.Oblast)return-1}else{if(d.Oblast>a.Oblast)return 1;if(d.Oblast<a.Oblast)return-1}return 0});let f=[];for(let c=0;c<d.length;c++)"\u041A\u043B\u0438\u0435\u043D\u0442"===d[c].Category&&(f.push(d[c]),d.splice(c,1),c--);for(let c=0;c<f.length;c++)d.unshift(f[c]);c[1][1]!=null&&c[1].pop(),c[1].push(d),$(".table").remove(),$(".info").append(fillingTables(c,!0)),"client"==saveTableAndCard[0].id&&(sortStatus.area.status=!0,sortStatus.area.filter=e),$(".centerBlock .header .cancel").remove(),b&&$(".centerBlock .header").append(`
        <div class="cancel">
            <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
        </div>
    `)}function sortTableByPrice(a){let b;sortStatus.product.status?b=filterProvider[1][1]:(filterProvider[1][1]!=null&&filterProvider[1].pop(),b=categoryInListProvider[1][1]);let c=[];for(let d,e=0;e<b.length;e++){d="string"==typeof b[e].Item_list?JSON.parse(b[e].Item_list):[];for(let a=0;a<d.length;a++)c.push({id:b[e].id,product:d[a].item_product,price:+d[a].item_price})}let d=[];for(let e,f=0;f<b.length;f++){e="string"==typeof b[f].Item_list?JSON.parse(b[f].Item_list):[];for(let a=0;a<e.length;a++)for(let g=0;g<c.length;g++)c[g].id==b[f].id&&c[g].product==e[a].item_product&&c[g].price==e[a].item_price&&d.push({Oblast:b[f].Oblast,Rayon:b[f].Rayon,Name:b[f].Name,Item_list:JSON.stringify([{item_product:e[a].item_product,item_price:e[a].item_price}]),Manager_id:b[f].Manager_id,id:b[f].id,Manager_active:!0})}d.sort(function(c,a){return+JSON.parse(c.Item_list)[0].item_price>+JSON.parse(a.Item_list)[0].item_price?1:+JSON.parse(c.Item_list)[0].item_price<+JSON.parse(a.Item_list)[0].item_price?-1:0}),"min"==a.id&&d.reverse(),filterProvider[1][1]!=null&&filterProvider[1].pop(),filterProvider[1].push(d),$(".table").remove(),$(".info").append(fillingTables(filterProvider,!0)),sortStatus.price.status=!0,sortStatus.price.filter=a.id,$(".centerBlock .header .cancel").remove(),$(".centerBlock .header").append(`
        <div class="cancel">
            <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
        </div>
    `)}function sortTableByProduct(a){let b;sortStatus.price.status?b=null==sortStatus.product.last?filterProvider[1][1]:sortStatus.product.last:(filterProvider[1][1]!=null&&filterProvider[1].pop(),b=categoryInListProvider[1][1]),sortStatus.product.last=categoryInListProvider[1][1];let c=[];for(let d,e=0;e<b.length;e++){d="string"==typeof b[e].Item_list?JSON.parse(b[e].Item_list):[];for(let a=0;a<d.length;a++)c.push({id:b[e].id,product:d[a].item_product,price:+d[a].item_price})}let d=[];for(let e,f=0;f<b.length;f++){e="string"==typeof b[f].Item_list?JSON.parse(b[f].Item_list):[];for(let g=0;g<e.length;g++)for(let h=0;h<c.length;h++)c[h].id==b[f].id&&c[h].product==e[g].item_product&&c[h].price==e[g].item_price&&a.innerHTML==e[g].item_product&&d.push({Oblast:b[f].Oblast,Rayon:b[f].Rayon,Name:b[f].Name,Item_list:JSON.stringify([{item_product:e[g].item_product,item_price:e[g].item_price}]),Manager_id:b[f].Manager_id,id:b[f].id,Manager_active:!0})}filterProvider[1][1]!=null&&filterProvider[1].pop(),filterProvider[1].push(d),$(".table").remove(),$(".info").append(fillingTables(filterProvider,!0)),sortStatus.product.status=!0,sortStatus.product.filter=a.innerHTML,$(".centerBlock .header .cancel").remove(),$(".centerBlock .header").append(`
        <div class="cancel">
            <button class="btn btn-main" onclick="cancelSearch()">Отменить поиск</button>
        </div>
    `)}function selectFilterCategory(a){return $(".table .cl_category").hasClass("drop_active")?($(".table .cl_category").removeClass("drop_active"),$(".list_category").fadeOut(200),void setTimeout(function(){$(".list_category").remove()},200)):void($(".table .cl_category").addClass("drop_active"),$(a).append($("<div>",{class:"list_category",css:{top:`${$(a).height()+20}px`},append:function(){let a=$("<ul>",{class:"list"}),b=saveTableAndCard[1][1],c=[];for(let a=0;a<b.length;a++)null!=b[a].Category&&""!=b[a].Category&&c.push(b[a].Category);for(let a=0;a<c.length-1;a++)for(let b=a+1;b<c.length;b++)c[a]==c[b]&&(c.splice(b,1),b--);for(let b=0;b<c.length;b++)a.append(`
                <li onclick="sortTableByCategory(this)">${c[b]}</li>
            `);return a}()})),$(".list_category").fadeIn(200))}function selectFilterArea(a){return $(".table .all_area").hasClass("drop_active")?($(".table .all_area").removeClass("drop_active"),$(".list_area").fadeOut(200),void setTimeout(function(){$(".list_area").remove()},200)):void($(".table .all_area").addClass("drop_active"),$(a).append($("<div>",{class:"list_area",css:{top:`${$(a).height()+20}px`},append:function(){let a=$("<ul>",{class:"list"});return a.append(`
            <li id="min" onclick="sortTableByArea(this)">От А до Я</li>
            <li id="max" onclick="sortTableByArea(this)">От Я до А</li>
        `),a}()})),$(".list_area").fadeIn(200))}function selectFilterPrice(a){return $(".table .pd_price").hasClass("drop_active")?($(".table .pd_price").removeClass("drop_active"),$(".list_price").fadeOut(200),void setTimeout(function(){$(".list_price").remove()},200)):void($(".table .pd_price").addClass("drop_active"),$(a).append($("<div>",{class:"list_price",css:{top:`${$(a).height()+20}px`},append:function(){let a=$("<ul>",{class:"list"});return a.append(`
            <li id="min" onclick="sortTableByPrice(this)">По возраст.</li>
            <li id="max" onclick="sortTableByPrice(this)">По убыванию</li>
        `),a}()})),$(".list_price").fadeIn(200))}function selectGroupProduct(a){return $(".table .pd_group").hasClass("drop_active")?($(".table .pd_group").removeClass("drop_active"),$(".list_group").fadeOut(200),void setTimeout(function(){$(".list_group").remove()},200)):void($(".table .pd_group").addClass("drop_active"),$(a).append($("<div>",{class:"list_group",css:{top:`${$(a).height()+20}px`},append:function(){let a=$("<ul>",{class:"list"}),b=categoryInListProvider[1][1],c=[];for(let a,d=0;d<b.length;d++)if(a="string"==typeof b[d].Item_list?JSON.parse(b[d].Item_list):[],0<a.length)for(let b=0;b<a.length;b++)c.push(a[b].item_product);for(let a=0;a<c.length-1;a++)for(let b=a+1;b<c.length;b++)c[a]==c[b]&&(c.splice(b,1),b--);for(let b=0;b<c.length;b++)a.append(`
                <li onclick="sortTableByProduct(this)">${c[b]}</li>
            `);return a}()})),$(".list_group").fadeIn(200))}function selectManager(a){return $(".table .pd_manager").hasClass("drop_active")?($(".table .pd_manager").removeClass("drop_active"),$(".list_manager").fadeOut(200),void setTimeout(function(){$(".list_manager").remove()},200)):void($(".table .pd_manager").addClass("drop_active"),$(a).append($("<div>",{class:"list_manager",css:{top:`${$(a).height()+20}px`},append:function(){let a=$("<ul>",{class:"list"});$.ajax({url:"/getUsers",type:"GET",async:!1,dataType:"html",success:function(a){data=JSON.parse(a)}});let b=[];for(let a=0;a<saveTableAndCard[1][1].length;a++)for(let c=0;c<data.length;c++)"manager"==data[c].role&&saveTableAndCard[1][1][a].Manager_id==data[c].id&&b.push(data[c]);for(let a=0;a<b.length-1;a++)for(let c=a+1;c<b.length;c++)b[a].id==b[c].id&&(b.splice(c,1),c--);for(let c=0;c<b.length;c++)a.append($("<li>",{html:b[c].second_name,id:b[c].id,onclick:"sortTableByManagers(this)"}));return a}()})),$(".list_manager").fadeIn(200))}function fillingTables(a,b=!1){"filter_stock"!==a[0].id&&(a[0].active=!0,!b&&(saveTableAndCard=a));for(let c=a[0].lastCard.length-1;0<=c;c--)if(null!=a[0].lastCard[c])return a[0].lastCard[c];if("analytics"===a[0].id){if("admin"==user.role)return analyticsFilterTable_0();if("manager"==user.role)return analyticsFilterTable_1()}let c=$("<table />",{class:"table",id:a[0].id});return rowFilling(a[a.length-1],a[0].id,c)}